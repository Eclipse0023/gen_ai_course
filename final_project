{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 1,
   "id": "7ead807c",
   "metadata": {
    "execution": {
     "iopub.execute_input": "2025-04-09T00:52:34.771050Z",
     "iopub.status.busy": "2025-04-09T00:52:34.770560Z",
     "iopub.status.idle": "2025-04-09T00:52:45.383679Z",
     "shell.execute_reply": "2025-04-09T00:52:45.382420Z"
    },
    "papermill": {
     "duration": 10.620037,
     "end_time": "2025-04-09T00:52:45.385785",
     "exception": false,
     "start_time": "2025-04-09T00:52:34.765748",
     "status": "completed"
    },
    "tags": []
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m144.7/144.7 kB\u001b[0m \u001b[31m3.7 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\r\n",
      "\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m100.9/100.9 kB\u001b[0m \u001b[31m3.8 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\r\n",
      "\u001b[?25h"
     ]
    }
   ],
   "source": [
    "!pip uninstall -qy jupyterlab  # Remove unused packages from Kaggle's base image that conflict\n",
    "!pip install -U -q \"google-genai==1.7.0\""
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "id": "1d6966b5",
   "metadata": {
    "execution": {
     "iopub.execute_input": "2025-04-09T00:52:45.393101Z",
     "iopub.status.busy": "2025-04-09T00:52:45.392755Z",
     "iopub.status.idle": "2025-04-09T00:52:46.720024Z",
     "shell.execute_reply": "2025-04-09T00:52:46.719055Z"
    },
    "papermill": {
     "duration": 1.332717,
     "end_time": "2025-04-09T00:52:46.721800",
     "exception": false,
     "start_time": "2025-04-09T00:52:45.389083",
     "status": "completed"
    },
    "tags": []
   },
   "outputs": [],
   "source": [
    "from google import genai\n",
    "from google.genai import types\n",
    "\n",
    "from IPython.display import HTML, Markdown, display\n",
    "#https://www.kaggle.com/datasets/robbietli/transactions-20250104-test-data-csv"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "id": "37a3c723",
   "metadata": {
    "execution": {
     "iopub.execute_input": "2025-04-09T00:52:46.729589Z",
     "iopub.status.busy": "2025-04-09T00:52:46.729044Z",
     "iopub.status.idle": "2025-04-09T00:52:46.888150Z",
     "shell.execute_reply": "2025-04-09T00:52:46.887020Z"
    },
    "papermill": {
     "duration": 0.165065,
     "end_time": "2025-04-09T00:52:46.890055",
     "exception": false,
     "start_time": "2025-04-09T00:52:46.724990",
     "status": "completed"
    },
    "tags": []
   },
   "outputs": [],
   "source": [
    "from kaggle_secrets import UserSecretsClient\n",
    "\n",
    "GOOGLE_API_KEY = UserSecretsClient().get_secret(\"GOOGLE_API_KEY\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "id": "740eea48",
   "metadata": {
    "execution": {
     "iopub.execute_input": "2025-04-09T00:52:46.897657Z",
     "iopub.status.busy": "2025-04-09T00:52:46.897297Z",
     "iopub.status.idle": "2025-04-09T00:52:47.281748Z",
     "shell.execute_reply": "2025-04-09T00:52:47.280608Z"
    },
    "papermill": {
     "duration": 0.390453,
     "end_time": "2025-04-09T00:52:47.283745",
     "exception": false,
     "start_time": "2025-04-09T00:52:46.893292",
     "status": "completed"
    },
    "tags": []
   },
   "outputs": [],
   "source": [
    "client = genai.Client(api_key=GOOGLE_API_KEY)\n",
    "\n",
    "# You can optionally set your model configuration here too\n",
    "model_config = types.GenerateContentConfig(\n",
    "    temperature=0.1,\n",
    "    top_p=1,\n",
    "    max_output_tokens=250,\n",
    ")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "id": "5829cdf4",
   "metadata": {
    "execution": {
     "iopub.execute_input": "2025-04-09T00:52:47.291111Z",
     "iopub.status.busy": "2025-04-09T00:52:47.290790Z",
     "iopub.status.idle": "2025-04-09T00:52:47.671602Z",
     "shell.execute_reply": "2025-04-09T00:52:47.670693Z"
    },
    "papermill": {
     "duration": 0.386564,
     "end_time": "2025-04-09T00:52:47.673490",
     "exception": false,
     "start_time": "2025-04-09T00:52:47.286926",
     "status": "completed"
    },
    "tags": []
   },
   "outputs": [],
   "source": [
    "from google.api_core import retry\n",
    "\n",
    "\n",
    "is_retriable = lambda e: (isinstance(e, genai.errors.APIError) and e.code in {429, 503})\n",
    "\n",
    "genai.models.Models.generate_content = retry.Retry(\n",
    "    predicate=is_retriable)(genai.models.Models.generate_content)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "id": "0052c9c9",
   "metadata": {
    "execution": {
     "iopub.execute_input": "2025-04-09T00:52:47.681065Z",
     "iopub.status.busy": "2025-04-09T00:52:47.680504Z",
     "iopub.status.idle": "2025-04-09T00:52:47.686580Z",
     "shell.execute_reply": "2025-04-09T00:52:47.685474Z"
    },
    "papermill": {
     "duration": 0.011677,
     "end_time": "2025-04-09T00:52:47.688308",
     "exception": false,
     "start_time": "2025-04-09T00:52:47.676631",
     "status": "completed"
    },
    "tags": []
   },
   "outputs": [],
   "source": [
    "def categorise_transaction(description):\n",
    "    few_shot_prompt = f\"\"\"\n",
    "    You are an AI assistant specializing in financial transaction categorization.\n",
    "    Your task is to analyze the provided transaction description and assign it to the most appropriate category and subcategory from the predefined lists.\n",
    "\n",
    "    **Allowed Categories:**\n",
    "    [   - Food & Beverages\n",
    "       - Shopping\n",
    "       - Housing\n",
    "       - Transportation\n",
    "       - Vehicle\n",
    "       - Life & Entertainment\n",
    "       - Communication, PC\n",
    "       - Financial expenses\n",
    "       - Investments\n",
    "       - Income\n",
    "    ]\n",
    "\n",
    "    **Allowed Subcategories (grouped by category for context):**\n",
    "    [\"Food & Beverages\": [\"Bar, cafe, drink, snacks\", \"Groceries\", \"Restaurant, fast-food\"],\n",
    "       \"Shopping\": [\"Clothes & Footwear\", \"Drug-store, chemist\", \"Electronics, accessories\",\n",
    "                    \"Gifts, joy\", \"Health and beauty\", \"Home, garden\", \"Jewels, accessories\",\n",
    "                    \"Kids\", \"Leisure time\", \"Pets, animals\", \"Stationery, tools\"],\n",
    "       \"Housing\": [\"Energy, utilities\", \"Maintenance, repairs\", \"Mortgage\", \"Property insurance\",\n",
    "                   \"Rent\", \"Services\"],\n",
    "       \"Transportation\": [\"Business trips\", \"Long distance\", \"Public transport\", \"Taxi\"],\n",
    "       \"Vehicle\": [\"Fuel\", \"Leasing\", \"Parking\", \"Rentals\", \"Vehicle insurance\", \"Vehicle maintenance\"],\n",
    "       \"Life & Entertainment\": [\"Active sport, fitness\", \"Alcohol, tobacco\", \"Books, audio, subscriptions\",\n",
    "                                \"Charity, gifts\", \"Culture, sport events\", \"Education, development\",\n",
    "                                \"Health care, doctor\", \"Hobbies\", \"Holiday, trips, hotels\",\n",
    "                                \"Life events\", \"Lottery, gambling\", \"TV, Streaming\", \"Wellness, beauty\"],\n",
    "       \"Communication, PC\": [\"Internet\", \"Postal services\", \"Software, apps, games\", \"Telephony, mobile phone\"],\n",
    "       \"Financial expenses\": [\"Advisory\", \"Charges, Fees\", \"Child Support\", \"Fines\", \"Insurances\",\n",
    "                              \"Loans, interests\", \"Taxes\"],\n",
    "       \"Investments\": [\"Collections\", \"Financial investments\", \"Realty\", \"Savings\", \"Vehicles, chattels\"],\n",
    "       \"Income\": [\"Checks, coupons\", \"Child Support\", \"Dues & grants\", \"Gifts\", \"Interests, dividends\",\n",
    "                  \"Lending, renting\", \"Lottery, gambling\", \"Refunds (tax, purchase)\",\n",
    "                  \"Rental income\", \"Sale\", \"Wage, invoices\"]\n",
    "       \"Transfer\":[\"Transfer\"]\n",
    "    ]\n",
    "\n",
    "    **Instructions:**\n",
    "    [...] Respond ONLY with a JSON object [...]\n",
    "\n",
    "    **Examples:**\n",
    "\n",
    "    * **Transaction Description:** \"BP Fuel Richmond VIC\"\n",
    "        **Output:** {{\"category\": \"Transportation\", \"subcategory\": \"Fuel\"}}\n",
    "\n",
    "    * **Transaction Description:** \"Salary Deposit ACME Corp\"\n",
    "        **Output:** {{\"category\": \"Income\", \"subcategory\": \"Salary\"}}\n",
    "\n",
    "    ---\n",
    "    **Now, categorize the following transaction:**\n",
    "\n",
    "    **Description:**\n",
    "    \"{description}\"\n",
    "\n",
    "    Output\n",
    "    \"\"\"\n",
    "    return few_shot_prompt\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "id": "617beea7",
   "metadata": {
    "execution": {
     "iopub.execute_input": "2025-04-09T00:52:47.695657Z",
     "iopub.status.busy": "2025-04-09T00:52:47.695339Z",
     "iopub.status.idle": "2025-04-09T00:52:49.059473Z",
     "shell.execute_reply": "2025-04-09T00:52:49.058398Z"
    },
    "papermill": {
     "duration": 1.370031,
     "end_time": "2025-04-09T00:52:49.061479",
     "exception": false,
     "start_time": "2025-04-09T00:52:47.691448",
     "status": "completed"
    },
    "tags": []
   },
   "outputs": [],
   "source": [
    "file_path = \"/kaggle/input/finance-test/transactions_20250104_test.csv\"\n",
    "import pandas as pd\n",
    "import json\n",
    "df = pd.read_csv(file_path)\n",
    "\n",
    "# Import tqdm for progress bar\n",
    "from tqdm.notebook import tqdm\n",
    "import time\n",
    "\n",
    "def process_transactions_in_batches(descriptions, batch_size=5, show_progress=True):\n",
    "    all_categories = []\n",
    "    all_subcategories = []\n",
    "    \n",
    "    # Setup progress bar\n",
    "    if show_progress:\n",
    "        pbar = tqdm(total=len(descriptions), desc=\"Categorizing transactions\")\n",
    "    \n",
    "    # Process in batches\n",
    "    for i in range(0, len(descriptions), batch_size):\n",
    "        batch = descriptions[i:i+batch_size]\n",
    "        batch_categories = []\n",
    "        batch_subcategories = []\n",
    "        \n",
    "        print(f\"Processing batch {i//batch_size + 1} ({i} to {min(i+batch_size, len(descriptions))})...\")\n",
    "        \n",
    "        # Process each transaction in the current batch\n",
    "        for description in batch:\n",
    "            try:\n",
    "                # Get the formatted prompt using the function\n",
    "                prompt_text = categorise_transaction(description)\n",
    "                \n",
    "                # Start timing the API call\n",
    "                start_time = time.time()\n",
    "                \n",
    "                response = client.models.generate_content(\n",
    "                    model='gemini-2.0-flash',\n",
    "                    config=types.GenerateContentConfig(\n",
    "                        temperature=0.1,\n",
    "                        top_p=1,\n",
    "                        max_output_tokens=250,\n",
    "                    ),\n",
    "                    contents=[{\"text\": prompt_text}]  # Send the already formatted prompt\n",
    "                )\n",
    "                \n",
    "                # Calculate API call duration\n",
    "                api_time = time.time() - start_time\n",
    "                \n",
    "                # Extract category and subcategory from the JSON response\n",
    "                response_text = response.text\n",
    "                # Find JSON object using braces\n",
    "                json_start = response_text.find('{')\n",
    "                json_end = response_text.rfind('}') + 1\n",
    "                \n",
    "                if json_start >= 0 and json_end > json_start:\n",
    "                    json_str = response_text[json_start:json_end]\n",
    "                    result = json.loads(json_str)\n",
    "                    category = result.get('category', 'Unknown')\n",
    "                    subcategory = result.get('subcategory', 'Unknown')\n",
    "                else:\n",
    "                    category = 'Error'\n",
    "                    subcategory = 'Could not parse response'\n",
    "                    print(f\"Parse error for '{description}'. Response: {response_text[:100]}...\")\n",
    "                    \n",
    "            except json.JSONDecodeError as je:\n",
    "                print(f\"JSON error for '{description}': {je}\")\n",
    "                print(f\"Response text: {response_text if 'response_text' in locals() else 'No response text'}\")\n",
    "                category = 'Error'\n",
    "                subcategory = 'JSON parse error'\n",
    "            except Exception as e:\n",
    "                print(f\"Error processing '{description}': {e}\")\n",
    "                print(f\"Response was: {response.text if 'response' in locals() else 'No response'}\")\n",
    "                category = 'Error'\n",
    "                subcategory = str(e)\n",
    "            \n",
    "            batch_categories.append(category)\n",
    "            batch_subcategories.append(subcategory)\n",
    "            \n",
    "            # Update progress bar\n",
    "            if show_progress:\n",
    "                pbar.update(1)\n",
    "        \n",
    "        # Add batch results to overall results\n",
    "        all_categories.extend(batch_categories)\n",
    "        all_subcategories.extend(batch_subcategories)\n",
    "        \n",
    "        # Show detailed sample result\n",
    "        if len(batch) > 0:\n",
    "            print(f\"Sample result - '{batch[0]}': Category='{batch_categories[0]}', Subcategory='{batch_subcategories[0]}'\")\n",
    "            print(f\"API response time: {api_time:.2f} seconds\")\n",
    "            print(\"-\" * 50)\n",
    "    \n",
    "    # Close progress bar\n",
    "    if show_progress:\n",
    "        pbar.close()\n",
    "    \n",
    "    return all_categories, all_subcategories\n",
    "\n",
    "# Function to save results to CSV\n",
    "def save_results_to_csv(df, filename=\"categorized_transactions.csv\"):\n",
    "    df.to_csv(filename, index=False)\n",
    "    print(f\"Results saved to {filename}\")\n",
    "    return filename"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "id": "6e0b6ed5",
   "metadata": {
    "execution": {
     "iopub.execute_input": "2025-04-09T00:52:49.068807Z",
     "iopub.status.busy": "2025-04-09T00:52:49.068486Z",
     "iopub.status.idle": "2025-04-09T00:52:54.443554Z",
     "shell.execute_reply": "2025-04-09T00:52:54.442496Z"
    },
    "papermill": {
     "duration": 5.380362,
     "end_time": "2025-04-09T00:52:54.445033",
     "exception": false,
     "start_time": "2025-04-09T00:52:49.064671",
     "status": "completed"
    },
    "tags": []
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Running improved categorization with progress bar:\n"
     ]
    },
    {
     "data": {
      "application/vnd.jupyter.widget-view+json": {
       "model_id": "11e020c53edc4fa48c3ac7ccd7015862",
       "version_major": 2,
       "version_minor": 0
      },
      "text/plain": [
       "Categorizing transactions:   0%|          | 0/10 [00:00<?, ?it/s]"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Processing batch 1 (0 to 5)...\n",
      "Sample result - 'Increase account balance by 1.0 AUD': Category='Income', Subcategory='Interests, dividends'\n",
      "API response time: 0.50 seconds\n",
      "--------------------------------------------------\n",
      "Processing batch 2 (5 to 10)...\n",
      "Sample result - 'Bonus interest activated ($72.91)': Category='Income', Subcategory='Interests, dividends'\n",
      "API response time: 0.49 seconds\n",
      "--------------------------------------------------\n",
      "\n",
      "Results for test data:\n",
      "                           description  category               subcategory\n",
      "0  Increase account balance by 1.0 AUD    Income      Interests, dividends\n",
      "1                       Amazon Digital  Shopping  Electronics, accessories\n",
      "2             Bonus interest activated    Income      Interests, dividends\n",
      "3             Bonus interest activated    Income      Interests, dividends\n",
      "4                      Interest earned    Income      Interests, dividends\n",
      "5    Bonus interest activated ($72.91)    Income      Interests, dividends\n",
      "6             Bonus interest activated    Income      Interests, dividends\n",
      "7             Bonus interest activated    Income      Interests, dividends\n",
      "8             Bonus interest activated    Income      Interests, dividends\n",
      "9             Bonus interest activated    Income      Interests, dividends\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "'\\nprint(\"\\nProcessing full dataset...\")\\nfull_categories, full_subcategories = process_transactions_in_batches(\\n    df[\\'description\\'].tolist(), \\n    batch_size=10,  # Increased batch size for faster processing\\n    show_progress=True\\n)\\n\\n# Add results to the main dataframe\\ndf[\\'category\\'] = full_categories\\ndf[\\'subcategory\\'] = full_subcategories\\n\\n# Save full results\\nsave_results_to_csv(df, \"full_categorized_transactions.csv\")\\n\\n# Display a sample of results\\nprint(\"\\nSample of Final Results:\")\\nprint(df[[\\'description\\', \\'category\\', \\'subcategory\\']].head(20))\\n'"
      ]
     },
     "execution_count": 8,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Test the improved function with a small sample\n",
    "test_descriptions = df['description'].head(10).tolist()\n",
    "\n",
    "# Run the improved function with progress bar\n",
    "print(\"Running improved categorization with progress bar:\")\n",
    "categories, subcategories = process_transactions_in_batches(test_descriptions, batch_size=5, show_progress=True)\n",
    "\n",
    "# Add the results to the test dataframe\n",
    "test_df = df.head(10).copy()\n",
    "test_df['category'] = categories\n",
    "test_df['subcategory'] = subcategories\n",
    "\n",
    "# Display the results\n",
    "print(\"\\nResults for test data:\")\n",
    "print(test_df[['description', 'category', 'subcategory']])\n",
    "\n",
    "# Save results to CSV (uncomment to use)\n",
    "# save_filename = save_results_to_csv(test_df, \"test_categorized_transactions.csv\")\n",
    "\n",
    "# For processing the full dataset (uncomment when ready)\n",
    "\"\"\"\n",
    "print(\"\\nProcessing full dataset...\")\n",
    "full_categories, full_subcategories = process_transactions_in_batches(\n",
    "    df['description'].tolist(), \n",
    "    batch_size=10,  # Increased batch size for faster processing\n",
    "    show_progress=True\n",
    ")\n",
    "\n",
    "# Add results to the main dataframe\n",
    "df['category'] = full_categories\n",
    "df['subcategory'] = full_subcategories\n",
    "\n",
    "# Save full results\n",
    "save_results_to_csv(df, \"full_categorized_transactions.csv\")\n",
    "\n",
    "# Display a sample of results\n",
    "print(\"\\nSample of Final Results:\")\n",
    "print(df[['description', 'category', 'subcategory']].head(20))\n",
    "\"\"\""
   ]
  }
 ],
 "metadata": {
  "kaggle": {
   "accelerator": "none",
   "dataSources": [
    {
     "datasetId": 7084116,
     "sourceId": 11325548,
     "sourceType": "datasetVersion"
    }
   ],
   "dockerImageVersionId": 30918,
   "isGpuEnabled": false,
   "isInternetEnabled": true,
   "language": "python",
   "sourceType": "notebook"
  },
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.10.12"
  },
  "papermill": {
   "default_parameters": {},
   "duration": 23.566775,
   "end_time": "2025-04-09T00:52:55.269091",
   "environment_variables": {},
   "exception": null,
   "input_path": "__notebook__.ipynb",
   "output_path": "__notebook__.ipynb",
   "parameters": {},
   "start_time": "2025-04-09T00:52:31.702316",
   "version": "2.6.0"
  },
  "widgets": {
   "application/vnd.jupyter.widget-state+json": {
    "state": {
     "11e020c53edc4fa48c3ac7ccd7015862": {
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "2.0.0",
      "model_name": "HBoxModel",
      "state": {
       "_dom_classes": [],
       "_model_module": "@jupyter-widgets/controls",
       "_model_module_version": "2.0.0",
       "_model_name": "HBoxModel",
       "_view_count": null,
       "_view_module": "@jupyter-widgets/controls",
       "_view_module_version": "2.0.0",
       "_view_name": "HBoxView",
       "box_style": "",
       "children": [
        "IPY_MODEL_7af57df0616d4d85b21f4148c0e62876",
        "IPY_MODEL_7cb4677ce4ad4f0380615b09c6987fd9",
        "IPY_MODEL_f980acc6b59d4ece805c1d4c75d4d23b"
       ],
       "layout": "IPY_MODEL_e7c327e7e5be41c490ef0b8201ddaeaf",
       "tabbable": null,
       "tooltip": null
      }
     },
     "18d8e210bab54ea39ff2b17aefa2f94a": {
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "2.0.0",
      "model_name": "ProgressStyleModel",
      "state": {
       "_model_module": "@jupyter-widgets/controls",
       "_model_module_version": "2.0.0",
       "_model_name": "ProgressStyleModel",
       "_view_count": null,
       "_view_module": "@jupyter-widgets/base",
       "_view_module_version": "2.0.0",
       "_view_name": "StyleView",
       "bar_color": null,
       "description_width": ""
      }
     },
     "5c939156d67f470d92a2c760151772d0": {
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "2.0.0",
      "model_name": "LayoutModel",
      "state": {
       "_model_module": "@jupyter-widgets/base",
       "_model_module_version": "2.0.0",
       "_model_name": "LayoutModel",
       "_view_count": null,
       "_view_module": "@jupyter-widgets/base",
       "_view_module_version": "2.0.0",
       "_view_name": "LayoutView",
       "align_content": null,
       "align_items": null,
       "align_self": null,
       "border_bottom": null,
       "border_left": null,
       "border_right": null,
       "border_top": null,
       "bottom": null,
       "display": null,
       "flex": null,
       "flex_flow": null,
       "grid_area": null,
       "grid_auto_columns": null,
       "grid_auto_flow": null,
       "grid_auto_rows": null,
       "grid_column": null,
       "grid_gap": null,
       "grid_row": null,
       "grid_template_areas": null,
       "grid_template_columns": null,
       "grid_template_rows": null,
       "height": null,
       "justify_content": null,
       "justify_items": null,
       "left": null,
       "margin": null,
       "max_height": null,
       "max_width": null,
       "min_height": null,
       "min_width": null,
       "object_fit": null,
       "object_position": null,
       "order": null,
       "overflow": null,
       "padding": null,
       "right": null,
       "top": null,
       "visibility": null,
       "width": null
      }
     },
     "7af57df0616d4d85b21f4148c0e62876": {
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "2.0.0",
      "model_name": "HTMLModel",
      "state": {
       "_dom_classes": [],
       "_model_module": "@jupyter-widgets/controls",
       "_model_module_version": "2.0.0",
       "_model_name": "HTMLModel",
       "_view_count": null,
       "_view_module": "@jupyter-widgets/controls",
       "_view_module_version": "2.0.0",
       "_view_name": "HTMLView",
       "description": "",
       "description_allow_html": false,
       "layout": "IPY_MODEL_cdca51ef4939469499f2e575cb83d465",
       "placeholder": "​",
       "style": "IPY_MODEL_d3dd559674d844cb86bb9e47590480e8",
       "tabbable": null,
       "tooltip": null,
       "value": "Categorizing transactions: 100%"
      }
     },
     "7cb4677ce4ad4f0380615b09c6987fd9": {
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "2.0.0",
      "model_name": "FloatProgressModel",
      "state": {
       "_dom_classes": [],
       "_model_module": "@jupyter-widgets/controls",
       "_model_module_version": "2.0.0",
       "_model_name": "FloatProgressModel",
       "_view_count": null,
       "_view_module": "@jupyter-widgets/controls",
       "_view_module_version": "2.0.0",
       "_view_name": "ProgressView",
       "bar_style": "success",
       "description": "",
       "description_allow_html": false,
       "layout": "IPY_MODEL_bd27ce51303f4407af1cba2301a3ab7b",
       "max": 10.0,
       "min": 0.0,
       "orientation": "horizontal",
       "style": "IPY_MODEL_18d8e210bab54ea39ff2b17aefa2f94a",
       "tabbable": null,
       "tooltip": null,
       "value": 10.0
      }
     },
     "9214b7d5004441688ade7f81f9c82de3": {
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "2.0.0",
      "model_name": "HTMLStyleModel",
      "state": {
       "_model_module": "@jupyter-widgets/controls",
       "_model_module_version": "2.0.0",
       "_model_name": "HTMLStyleModel",
       "_view_count": null,
       "_view_module": "@jupyter-widgets/base",
       "_view_module_version": "2.0.0",
       "_view_name": "StyleView",
       "background": null,
       "description_width": "",
       "font_size": null,
       "text_color": null
      }
     },
     "bd27ce51303f4407af1cba2301a3ab7b": {
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "2.0.0",
      "model_name": "LayoutModel",
      "state": {
       "_model_module": "@jupyter-widgets/base",
       "_model_module_version": "2.0.0",
       "_model_name": "LayoutModel",
       "_view_count": null,
       "_view_module": "@jupyter-widgets/base",
       "_view_module_version": "2.0.0",
       "_view_name": "LayoutView",
       "align_content": null,
       "align_items": null,
       "align_self": null,
       "border_bottom": null,
       "border_left": null,
       "border_right": null,
       "border_top": null,
       "bottom": null,
       "display": null,
       "flex": null,
       "flex_flow": null,
       "grid_area": null,
       "grid_auto_columns": null,
       "grid_auto_flow": null,
       "grid_auto_rows": null,
       "grid_column": null,
       "grid_gap": null,
       "grid_row": null,
       "grid_template_areas": null,
       "grid_template_columns": null,
       "grid_template_rows": null,
       "height": null,
       "justify_content": null,
       "justify_items": null,
       "left": null,
       "margin": null,
       "max_height": null,
       "max_width": null,
       "min_height": null,
       "min_width": null,
       "object_fit": null,
       "object_position": null,
       "order": null,
       "overflow": null,
       "padding": null,
       "right": null,
       "top": null,
       "visibility": null,
       "width": null
      }
     },
     "cdca51ef4939469499f2e575cb83d465": {
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "2.0.0",
      "model_name": "LayoutModel",
      "state": {
       "_model_module": "@jupyter-widgets/base",
       "_model_module_version": "2.0.0",
       "_model_name": "LayoutModel",
       "_view_count": null,
       "_view_module": "@jupyter-widgets/base",
       "_view_module_version": "2.0.0",
       "_view_name": "LayoutView",
       "align_content": null,
       "align_items": null,
       "align_self": null,
       "border_bottom": null,
       "border_left": null,
       "border_right": null,
       "border_top": null,
       "bottom": null,
       "display": null,
       "flex": null,
       "flex_flow": null,
       "grid_area": null,
       "grid_auto_columns": null,
       "grid_auto_flow": null,
       "grid_auto_rows": null,
       "grid_column": null,
       "grid_gap": null,
       "grid_row": null,
       "grid_template_areas": null,
       "grid_template_columns": null,
       "grid_template_rows": null,
       "height": null,
       "justify_content": null,
       "justify_items": null,
       "left": null,
       "margin": null,
       "max_height": null,
       "max_width": null,
       "min_height": null,
       "min_width": null,
       "object_fit": null,
       "object_position": null,
       "order": null,
       "overflow": null,
       "padding": null,
       "right": null,
       "top": null,
       "visibility": null,
       "width": null
      }
     },
     "d3dd559674d844cb86bb9e47590480e8": {
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "2.0.0",
      "model_name": "HTMLStyleModel",
      "state": {
       "_model_module": "@jupyter-widgets/controls",
       "_model_module_version": "2.0.0",
       "_model_name": "HTMLStyleModel",
       "_view_count": null,
       "_view_module": "@jupyter-widgets/base",
       "_view_module_version": "2.0.0",
       "_view_name": "StyleView",
       "background": null,
       "description_width": "",
       "font_size": null,
       "text_color": null
      }
     },
     "e7c327e7e5be41c490ef0b8201ddaeaf": {
      "model_module": "@jupyter-widgets/base",
      "model_module_version": "2.0.0",
      "model_name": "LayoutModel",
      "state": {
       "_model_module": "@jupyter-widgets/base",
       "_model_module_version": "2.0.0",
       "_model_name": "LayoutModel",
       "_view_count": null,
       "_view_module": "@jupyter-widgets/base",
       "_view_module_version": "2.0.0",
       "_view_name": "LayoutView",
       "align_content": null,
       "align_items": null,
       "align_self": null,
       "border_bottom": null,
       "border_left": null,
       "border_right": null,
       "border_top": null,
       "bottom": null,
       "display": null,
       "flex": null,
       "flex_flow": null,
       "grid_area": null,
       "grid_auto_columns": null,
       "grid_auto_flow": null,
       "grid_auto_rows": null,
       "grid_column": null,
       "grid_gap": null,
       "grid_row": null,
       "grid_template_areas": null,
       "grid_template_columns": null,
       "grid_template_rows": null,
       "height": null,
       "justify_content": null,
       "justify_items": null,
       "left": null,
       "margin": null,
       "max_height": null,
       "max_width": null,
       "min_height": null,
       "min_width": null,
       "object_fit": null,
       "object_position": null,
       "order": null,
       "overflow": null,
       "padding": null,
       "right": null,
       "top": null,
       "visibility": null,
       "width": null
      }
     },
     "f980acc6b59d4ece805c1d4c75d4d23b": {
      "model_module": "@jupyter-widgets/controls",
      "model_module_version": "2.0.0",
      "model_name": "HTMLModel",
      "state": {
       "_dom_classes": [],
       "_model_module": "@jupyter-widgets/controls",
       "_model_module_version": "2.0.0",
       "_model_name": "HTMLModel",
       "_view_count": null,
       "_view_module": "@jupyter-widgets/controls",
       "_view_module_version": "2.0.0",
       "_view_name": "HTMLView",
       "description": "",
       "description_allow_html": false,
       "layout": "IPY_MODEL_5c939156d67f470d92a2c760151772d0",
       "placeholder": "​",
       "style": "IPY_MODEL_9214b7d5004441688ade7f81f9c82de3",
       "tabbable": null,
       "tooltip": null,
       "value": " 10/10 [00:05&lt;00:00,  2.01it/s]"
      }
     }
    },
    "version_major": 2,
    "version_minor": 0
   }
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
